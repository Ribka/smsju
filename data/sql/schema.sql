CREATE TABLE sms_customer_organization (id BIGINT AUTO_INCREMENT, customer_id VARCHAR(255) NOT NULL UNIQUE, customer_organization_tin_number VARCHAR(255) NOT NULL, customer_oraganization_name VARCHAR(255) NOT NULL, customer_oraganization_acronym VARCHAR(255) NOT NULL, customer_oraganization_head_office_name VARCHAR(255) NOT NULL, customer_oraganization_head_office_phone VARCHAR(255) NOT NULL, customer_oraganization_chief_executive_name VARCHAR(255) NOT NULL, customer_oraganization_contact_person VARCHAR(255) NOT NULL, customer_oraganization_designation VARCHAR(255), customer_oraganization_place VARCHAR(255), customer_oraganization_email VARCHAR(255), customer_oraganization_phone_number VARCHAR(255) NOT NULL, customer_oraganization_fax VARCHAR(255), customer_oraganization_web_site VARCHAR(255), customer_oraganization_global_head_count VARCHAR(255), customer_oraganization_local_head_count VARCHAR(255), customer_oraganization_founded_date DATE, ownership VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_family (id BIGINT AUTO_INCREMENT, family_name VARCHAR(255), family_code VARCHAR(255), description VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE smsgroup (id BIGINT AUTO_INCREMENT, group_name VARCHAR(255), group_code VARCHAR(255), description VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_issue (id BIGINT AUTO_INCREMENT, exit_number VARCHAR(255) NOT NULL, issue_type VARCHAR(255) NOT NULL, item_id BIGINT NOT NULL, reciept_referrence_id BIGINT NOT NULL, serial_number VARCHAR(255) NOT NULL, storekeeper_id VARCHAR(255) NOT NULL, borrower_id VARCHAR(255) NOT NULL, quantity VARCHAR(255) NOT NULL, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX item_id_idx (item_id), INDEX reciept_referrence_id_idx (reciept_referrence_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_item (id BIGINT AUTO_INCREMENT, item_name VARCHAR(255), group_id BIGINT NOT NULL, family_id BIGINT NOT NULL, item_code VARCHAR(255) NOT NULL UNIQUE, item_type VARCHAR(255), item_quantity BIGINT NOT NULL, item_measuring_unit VARCHAR(255) NOT NULL, item_description TEXT NOT NULL, item_store_id VARCHAR(255) NOT NULL UNIQUE, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX family_id_idx (family_id), INDEX group_id_idx (group_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_request (id BIGINT AUTO_INCREMENT, requested_by VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, requested_item VARCHAR(255) NOT NULL, requested_quantity BIGINT NOT NULL, description TEXT NOT NULL, request_status VARCHAR(250) DEFAULT 'not-viewed' NOT NULL, given_quantity BIGINT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_return (id BIGINT AUTO_INCREMENT, return_type VARCHAR(255) NOT NULL, exit_id BIGINT NOT NULL, item_id BIGINT NOT NULL, return_number VARCHAR(255) NOT NULL, employee_id VARCHAR(255) NOT NULL, store_keeper_id VARCHAR(255) NOT NULL, quantity BIGINT NOT NULL, description TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX exit_id_idx (exit_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sms_stock_reciept (id BIGINT AUTO_INCREMENT, recived_number VARCHAR(250) NOT NULL UNIQUE, item_id BIGINT NOT NULL, rf_id VARCHAR(255), cust_id VARCHAR(255) NOT NULL, reciever_stockeper_id VARCHAR(255) NOT NULL, quantity BIGINT NOT NULL, unite_price FLOAT(18, 2) NOT NULL, total_price FLOAT(18, 2) NOT NULL, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX item_id_idx (item_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE sms_issue ADD CONSTRAINT sms_issue_reciept_referrence_id_sms_stock_reciept_id FOREIGN KEY (reciept_referrence_id) REFERENCES sms_stock_reciept(id) ON UPDATE CASCADE;
ALTER TABLE sms_issue ADD CONSTRAINT sms_issue_item_id_sms_item_id FOREIGN KEY (item_id) REFERENCES sms_item(id) ON UPDATE CASCADE;
ALTER TABLE sms_item ADD CONSTRAINT sms_item_group_id_smsgroup_id FOREIGN KEY (group_id) REFERENCES smsgroup(id) ON DELETE CASCADE;
ALTER TABLE sms_item ADD CONSTRAINT sms_item_family_id_sms_family_id FOREIGN KEY (family_id) REFERENCES sms_family(id) ON DELETE CASCADE;
ALTER TABLE sms_return ADD CONSTRAINT sms_return_exit_id_sms_issue_id FOREIGN KEY (exit_id) REFERENCES sms_issue(id) ON DELETE CASCADE;
ALTER TABLE sms_stock_reciept ADD CONSTRAINT sms_stock_reciept_item_id_sms_item_id FOREIGN KEY (item_id) REFERENCES sms_item(id) ON UPDATE CASCADE;
